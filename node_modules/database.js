const fs = require("fs");

const databaseFile = '/home/connor/callmonitor/db/db.json'
var data = {}

function writeDataToDatabase(key, value){
	console.log("Writing data to file");
	if(readDataFromDatabase(key) === 'null'){
		console.log(`Inserting new entry: ${key}, ${value}.`);
		data[key] = value;
	} else {
		console.log(`Updating database.\nOLD data: ${key}, ${data[key]}\nNEW data: ${key}, ${value}.`);
	}	
	
}

function readDataFromDatabase(key){
	console.log("Reading database file into memory");
	const contents = fs.readFileSync(databaseFile, {'encoding':'utf8','flag':'r'});
	data = JSON.parse(contents);
	if(key in data){
		return data[key];
	} else {
		console.log(`Nothing exists for key: ${key}.`);
		return null;
	}
}
